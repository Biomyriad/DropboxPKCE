<!doctype html>
<html>

<head>
    <title>Dropbox JavaScript SDK</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.3/fetch.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/promise-polyfill@7/dist/polyfill.min.js"></script>
    <script src="
https://cdn.jsdelivr.net/npm/dropbox@10.34.0/dist/Dropbox-sdk.min.js
"></script>
    <script src="utils.js"></script>
    <script sc="dropbox.js"></script>
    <script type="module" src="dbApi.js" defer></script>
</head>

<body>
    <!-- Example layout boilerplate -->
    <header class="page-header">
        <div class="container">
            <nav>
                <a href="/">
                    <h1>
                        <img src="https://cfl.dropboxstatic.com/static/images/brand/logotype_white-vflRG5Zd8.svg" class="logo" /> 
                        JavaScript SDK Examples
                    </h1>
                </a>
                <a href="https://github.com/dropbox/dropbox-sdk-js/tree/main/examples/javascript" class="view-source">View Source</a>
            </nav>
            <h2 class="code">
                <a href="/">examples</a> / PKCE browser
            </h2>
        </div>
    </header>

    <!-- Example description and UI -->
    <section class="container main" style="color: white;">
        <p>This example shows how to use PKCE in the browser</p>
        <div id="pre-auth-section" style="display:block;">
            <button onClick="listFiles()">doAuth</button>
            <button onClick="tst()">StartPage</button>
            <button onClick="">refresh test</button>
            <p class="info">Once authenticated, it will use the access token to list the files in your root directory.</p>
            <hr><hr>
        </div>

        <div id="authed-section" style="display:block;">
            <p>You have successfully authenticated. Below are the contents of your root directory. They were fetched using the SDK and access token.</p>
            <ul id="files"></ul>
        </div>
    </section>

    <!-- Scripts to run example -->
    <script>
       function tst( ) {
         var dba = new DbApi()
       }
        
    
        // Render a list of items to #files
        function renderItems(items) {
            var filesContainer = document.getElementById('files');
            items.forEach(function(item) {
                var li = document.createElement('li');
                li.innerHTML = item.name;
                filesContainer.appendChild(li);
            });
        }

        function listFiles() {
      
          var r = dbx.filesListFolder({path: ''})
          renderItems(r)
        }

        
    </script>
</body>

</html>

